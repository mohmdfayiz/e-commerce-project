<%- include('./profileHeader.ejs') -%> 

    <div class="d-none d-lg-block" style="height:100px;"></div>
    <section>
        <div class="container">
            <div class="row"
                style="background-image: linear-gradient(to right,#696cff,#9697f8) ;border-radius: 8px; box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);">
                <div class="col-8 d-flex align-items-center">
                    <span class="material-symbols-outlined text-light mt-2"> inventory_2</span>
                    <h4 class="ps-1 mt-2 text-light">Orders</h4>
                </div>
                <div class="col-4 d-flex align-items-center justify-content-end">
                    <a href="" data-bs-toggle="tooltip" data-bs-offset="0,4" data-bs-placement="top" data-bs-html="true"
                        title="<span>Orders</span>" class="mt-3 p-3 text-light"><span
                            class="material-symbols-outlined text-light">
                            inventory_2
                        </span></a>
                    <a href="/manageAddress" data-bs-toggle="tooltip" data-bs-offset="0,4" data-bs-placement="top"
                        data-bs-html="true" title="<span>Address</span>" class="mt-3 p-3"><span
                            class=" material-symbols-outlined text-light">
                            location_on
                        </span></a>
                    <a href="/accountSettings" data-bs-toggle="tooltip" data-bs-offset="0,4" data-bs-placement="top"
                        data-bs-html="true" title="<span>Account Settings</span>" class="mt-3 p-3"><span class="text-light material-symbols-outlined" style="font-size: 28px;">
                            manage_accounts
                        </span></a>
                </div>
            </div>
        </div>
    </section>

    <section class="container">
        <!-- Basic Bootstrap Table -->
        <div class="card my-5">
            <div class="table-responsive text-nowrap">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Product Name</th>
                            <!-- <th>Quantity</th> -->
                            <th>Total</th>
                            <th>Payment</th>
                            <th>Status</th>
                            <th>Details</th>
                        </tr>
                    </thead>
                    <tbody class="table-border-bottom-0">
                        <% orders.forEach(function(order){ %>
                            <% order.products.forEach(function(product){ %>
                                <tr>
                                    <td><%=  moment(order.orderDate).format("LL") %></td>
                                    <td>
                                        <%= product.productId.productName %>
                                    </td>
                                    <!-- <td>
                                        <%= product.quantity %>
                                    </td> -->
                                    <td>
                                        <%= product.total %>
                                    </td>
                                    <td>
                                        <%= order.paymentMethod %>
                                    </td>
                                    <td>
                                        <% if(order.orderStatus === "Packed"){ %> 
                                        <span class="badge bg-label-info me-1">Packed</span>
                                        <% }else if(order.orderStatus === "Shipped"){ %> 
                                        <span class="badge bg-label-primary me-1">Shipped</span>
                                        <% }else if(order.orderStatus === "Delivered"){ %>
                                        <span class="badge bg-label-success me-1">Delivered</span>
                                        <% }else if(order.orderStatus === "Cancelled"){ %> 
                                        <span class="badge bg-label-danger me-1">Cancelled</span>
                                        <% }else{ %> 
                                        <span class="badge bg-label-warning me-1">Processing</span>
                                        <% } %> 
                                    <td>
                                        <a href="/orderDetails/<%= order._id %> "><span class="material-symbols-outlined text-secondary">info</span></a>
                                    </td>
                                </tr>
                                <% }) %>
                                    <% }) %>
                    </tbody>
                </table>
            </div>
        </div>
        <!--/ Basic Bootstrap Table -->
    </section>
    
    <%- include('../userFooter.ejs') -%> 