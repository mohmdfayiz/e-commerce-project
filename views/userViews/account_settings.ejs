<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ride.</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="../public/admin/styles/style.css">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="../public/admin/img/favicon/favicon.ico" />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
        href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap"
        rel="stylesheet" />

    <!-- Icons. Uncomment required icon fonts -->
    <link rel="stylesheet" href="../public/admin/vendor/fonts/boxicons.css" />

    <!-- Core CSS -->
    <link rel="stylesheet" href="../public/admin/vendor/css/core.css" class="template-customizer-core-css" />
    <link rel="stylesheet" href="../public/admin/vendor/css/theme-default.css" class="template-customizer-theme-css" />
    <link rel="stylesheet" href="../public/admin/css/demo.css" />

    <!-- Vendors CSS -->
    <link rel="stylesheet" href="../public/admin/vendor/libs/perfect-scrollbar/perfect-scrollbar.css" />

    <link rel="stylesheet" href="../public/admin/vendor/libs/apex-charts/apex-charts.css" />

    <!-- Page CSS -->
    <!--===============================================================================================-->
    <link rel="icon" type="image/x-icon" href="../public/admin/img/favicon/favicon.ico" />
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="/public/users/vendor/bootstrap/css/bootstrap.min.css" />
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="/public/users/fonts/font-awesome-4.7.0/css/font-awesome.min.css" />
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="/public/users/fonts/iconic/css/material-design-iconic-font.min.css" />
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="/public/users/fonts/linearicons-v1.0.0/icon-font.min.css" />
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="/public/users/vendor/animate/animate.css" />
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="/public/users/vendor/css-hamburgers/hamburgers.min.css" />
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="/public/users/vendor/animsition/css/animsition.min.css" />
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="/public/users/vendor/select2/select2.min.css" />
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="/public/users/vendor/daterangepicker/daterangepicker.css" />
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="/public/users/vendor/slick/slick.css" />
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="/public/users/vendor/MagnificPopup/magnific-popup.css" />
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="/public/users/vendor/perfect-scrollbar/perfect-scrollbar.css" />
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="/public/users/css/util.css" />
    <link rel="stylesheet" type="text/css" href="/public/users/css/main.css" />
    <!--===============================================================================================-->
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
    <!-- =============gooogle icons ============= -->
    <link rel="stylesheet" href="/public/styles/style.css" />

    <!-- ============== Search field style =============-->
    <!-- Helpers -->
    <script src="../public/admin/vendor/js/helpers.js"></script>

    <!--! Template customizer & Theme config files MUST be included after core stylesheets and helpers.js in the <head> section -->
    <!--? Config:  Mandatory theme config file contain global vars & default theme options, Set your preferred theme option in this file.  -->
    <script src="../public/admin/js/config.js"></script>

    <!-- ajax -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.js"></script>
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>

</head>

<body>

    <header>
        <!-- Header desktop -->
        <div class="container-menu-desktop">
            <!-- Topbar -->
            <div class="top-bar">
                <div class="content-topbar flex-sb-m h-full container">
                    <div class="left-top-bar">
                        Free shipping for standard order over $5000
                    </div>

                    <div class="right-top-bar flex-w h-full">

                        <form action="/logout" method="post">
                            <button class="flex-c-m trans-04 p-lr-25" type="submit" style="color: grey; margin: 10px">
                                Logout
                            </button>
                        </form>
                    </div>
                </div>
            </div>

            <div class="wrap-menu-desktop">
                <nav class="limiter-menu-desktop container">
                    <!-- Logo desktop -->
                    <a href="/" class="logo">
                        <img src="/public/admin/img/favicon/favicon.ico" alt="IMG-LOGO" />
                        <h2 style="color: #566a7f; font-weight: bold">ride.</h2>
                    </a>

                    <!-- Menu desktop -->
                    <div class="menu-desktop">
                        <ul class="main-menu">
                            <li class="active-menu">
                                <a href="/">Home</a>
                            </li>

                            <li>
                                <a href="#">Shop</a>
                            </li>

                            <li>
                                <a href="#">Bikes</a>
                            </li>

                            <li>
                                <a href="#">Accessories</a>
                            </li>
                            <li>
                                <a href="#">Gadgets</a>
                            </li>
                        </ul>
                    </div>

                    <!-- Icon header -->
                    <div class="wrap-icon-header flex-w flex-r-m">
                        <div class="search-box">
                            <input class="search-text" type="text" name="" placeholder="Type to search" />
                            <span
                                class="material-symbols-outlined search-btn icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11">
                                search
                            </span>
                        </div>

                        <a href="/wishlist" class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 ">
                            <span class="material-symbols-outlined ">
                                favorite
                            </span>
                        </a>

                        <a href="/cart" class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11">
                            <span class="material-symbols-outlined"> shopping_cart </span>
                        </a>
                        <a href="/account">
                            <span class="material-symbols-outlined icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11"
                                style="font-size: 28px">
                                person
                            </span>
                        </a>

                        <!-- <a
                  href="#"
                  class="dis-block icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 icon-header-noti">
                  <i class="zmdi zmdi-favorite-outline"></i>
                </a> -->
                    </div>
                </nav>
            </div>
        </div>

        <!-- Header Mobile -->
        <div class="wrap-header-mobile">
            <!-- Logo moblie -->
            <div class="logo-mobile">
                <a href="/"><img src="/public/admin/img/favicon/favicon.ico" alt="IMG-LOGO" /></a>
            </div>

            <!-- Icon header -->
            <div class="wrap-icon-header flex-w flex-r-m m-r-15">
                <div class="search-box">
                    <input class="search-text" type="text" name="" placeholder="Type to search" />

                    <span
                        class="material-symbols-outlined search-btn icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11">
                        search
                    </span>
                </div>

                <span class="material-symbols-outlined icon-header-item cl2 hov-cl1 trans-04 p-r-11 js-show-cart">
                    shopping_cart
                </span>

                <span class="material-symbols-outlined icon-header-item cl2 hov-cl1 trans-04 p-r-11"
                    style="font-size: 28px">
                    person
                </span>
            </div>

            <!-- Button show menu -->
            <div class="btn-show-menu-mobile hamburger hamburger--squeeze">
                <span class="hamburger-box">
                    <span class="hamburger-inner"></span>
                </span>
            </div>
        </div>

        <!-- Menu Mobile -->
        <div class="menu-mobile">
            <ul class="main-menu-m">
                <li>
                    <a href="/">Home</a>
                </li>

                <li>
                    <a href="">Bicycles</a>
                </li>

                <li>
                    <a href="">Accessories</a>
                </li>

                <li>
                    <a href="#">Gadgets</a>
                </li>

                <li>
                    <a href="#">About</a>
                </li>
            </ul>
        </div>
    </header>
    <div class="d-none d-lg-block" style="height:100px;"></div>
    <section>
        <div class="container">
            <div class="row"
                style="background-image: linear-gradient(to right,#696cff,#9697f8) ;border-radius: 8px; box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);">
                <div class="col-8 d-flex align-items-center">
                    <span class="text-light material-symbols-outlined mt-1"
                        style="font-size: 30px;">manage_accounts</span>
                    <h4 class="ps-1 mt-2 text-light">Settings</h4>
                </div>
                <div class="col-4 d-flex align-items-center justify-content-end">
                    <a href="/orders" data-bs-toggle="tooltip" data-bs-offset="0,4" data-bs-placement="top"
                        data-bs-html="true" title="<span>Orders</span>" class="mt-3 p-3 text-light"><span
                            class="material-symbols-outlined text-light">
                            inventory_2
                        </span></a>
                    <a href="/manageAddress" data-bs-toggle="tooltip" data-bs-offset="0,4" data-bs-placement="top"
                        data-bs-html="true" title="<span>Address</span>" class="mt-3 p-3"><span
                            class=" material-symbols-outlined text-light">
                            location_on
                        </span></a>
                    <a href="/accountSettings" data-bs-toggle="tooltip" data-bs-offset="0,4" data-bs-placement="top"
                        data-bs-html="true" title="<span>Account Settings</span>" class="mt-3 p-3"><span
                            class="text-light material-symbols-outlined" style="font-size: 28px;">
                            manage_accounts
                        </span></a>
                </div>
            </div>
        </div>
    </section>

    <section class="container my-5">
        <div class="row d-flex justify-content-around align-items-center">

            <div class="col-md-6 p-3"
                style="background-color:#f5f5f5 ; border-radius: 8px;  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2)">
                <strong>Personal data</strong>
                <form class="mt-3" id="personalData">
                    <label for="userName" class="form-label">User Name</label>
                    <input type="text" class="form-control mb-3" value="<%= user.userName %>" name="userName">
                    <label for="email" class="form-label">Email</label>
                    <input type="email" class="form-control mb-3" value="<%= user.email %>" name="email">
                    <button id="savebtn" class="btn btn-outline-success col-12">Save</button>
                </form>
            </div>

            <div class="col-md-4 p-3 mt-4 mt-md-0" id="pswrd"
                style="background-color:#f5f5f5 ; border-radius: 8px;  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2)">
                <strong>Change Password</strong>
                <label for="inputPassword5" class="form-label mt-3">New Password</label>
                <input type="text" id="password1" class="form-control mb-3" name="password1" required>
                <label for="inputPassword5" class="form-label">Confirm Password</label>
                <input type="password" id="password2" class="form-control mb-3" name="password2" required>
                <label id="errMsg" class="text-danger"></label>
                <button onclick="changePassword()" class="btn btn-outline-success col-12">Change Password</button>
            </div>
        </div>
    </section>
    <script>

        $("#personalData").submit(function (event) {
            event.preventDefault();
            var data = $("#personalData").serialize()
            $.ajax({
                url: "/accountSettings",
                method: "POST",
                data: data,
                success: (response) => {
                    if (response.status) {
                        $("#personalData").load(" #personalData > *");
                        Swal.fire({
                            icon: 'success',
                            text: 'Profile Updated Successfully.',
                            showConfirmButton: false,
                            timer: 1500
                        })
                    }
                }
            })
        })
        function changePassword() {
            let password1 = document.getElementById("password1").value;
            let password2 = document.getElementById("password2").value;
            password1 == password2 ?
                $.ajax({
                    url: "/accountSettings",
                    data: {
                        password1
                    },
                    method: "PATCH",
                    success: (response) => {
                        if (response.status) {
                            $("#pswrd").load(" #pswrd > *");
                            Swal.fire({
                                icon: 'success',
                                text: 'Password Updated successfully.',
                                showConfirmButton: false,
                                timer: 1500
                            })
                        }
                    }
                }) : document.getElementById("errMsg").innerHTML = "Password do not match!"
        }
    </script>
    <%- include('../userFooter.ejs') -%>